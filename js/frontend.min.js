$j(document).ready(function(){patips_switch_tab_by_url_parameter();$j(".patips-tabs").on("click",".patips-tab-link",function(){var a=$j(this).attr("id")?$j(this).attr("id").substr(4):"";a&&patips_switch_tab(a)});$j("body").on("click",".patips-ajax-list-more-link",function(a){a.preventDefault();patips_display_more_list_items($j(this))});$j("body").on("change",".patips-tier-option-input",function(){$j(this).closest(".patips-tier-options-container").find(".patips-tier-option-container").removeClass("patips-selected");
$j(this).closest(".patips-tier-option-container").addClass("patips-selected");$j(this).closest(".patips-add-to-cart-tier-form").find(".patips-notices").remove()});$j("body").on("submit",".patips-free-subscription-form",function(a){a.preventDefault();patips_submit_susbcription_form($j(this))})});
function patips_switch_tab(a){$j(".patips-tab-link, .patips-tab-content").removeClass("patips-tab-active");$j('.patips-tab-link[id="tab-'+a+'"], .patips-tab-content[id="'+a+'"]').addClass("patips-tab-active")}
function patips_switch_tab_by_url_parameter(){var a=patips_get_url_parameter("tab");!a&&$j(".patips-tab-link.patips-tab-active:first").length&&$j(".patips-tab-link.patips-tab-active:first").attr("id")&&(a=$j(".patips-tab-link.patips-tab-active:first").attr("id").substr(4));a&&patips_switch_tab(a)}
function patips_display_more_list_items(a){if(!a.data("processing")){var c=a.closest(".patips-ajax-list");c.find(".patips-notices").remove();a.data("processing",!0);a.hide();var d=a.parent();patips_add_loading_html(d);$j.ajax({url:patips_var.ajaxurl,type:"POST",data:{action:"patipsGetListItems",type:JSON.stringify(a.data("type")),args:JSON.stringify(a.data("args")),nonce:a.data("nonce")},dataType:"json",success:function(b){if("success"===b.status)c.find(".patips-ajax-list-items").append(b.html),a.data("args")?.filters?.offset&&
(a.data("args").filters.offset=parseInt(b.offset)),parseInt(b.has_more)&&a.show();else if("failed"===b.status){var e="undefined"!==typeof b.message?b.message:patips_var.error;c.append('<div class="patips-notices"><ul class="patips-error-list"><li>'+e+"</li></ul></div>");"no_more_items"!==("undefined"!==typeof b.error?b.error:"")&&a.show();console.log(e);console.log(b)}},error:function(b){c.append('<div class="patips-notices"><ul class="patips-error-list"><li>AJAX '+patips_var.error+"</li></ul></div>");
a.show();console.log("AJAX error");console.log(b)},complete:function(){c.find(".patips-notices").show();patips_remove_loading_html(d);a.data("processing",!1)}})}}
function patips_submit_susbcription_form(a){if(!a.data("processing")){a.find(".patips-notices").remove();a.data("processing",!0);a.find('input[type="submit"]').attr("disabled",!0);var c={form_data:new FormData(a.get(0)),redirect_url:"undefined"!==typeof a.attr("action")?a.attr("action"):""};a.trigger("patips_before_submit_susbcription_form",[c]);if(!(c.form_data instanceof FormData))return submit_button.length&&a.find('input[type="submit"]').prop("disabled",!1),!1;c.form_data.set("action","patipsSubmitSusbcriptionForm");
patips_add_loading_html(a);$j.ajax({url:patips_var.ajaxurl,type:"POST",data:c.form_data,dataType:"json",cache:!1,contentType:!1,processData:!1,success:function(d){if("success"===d.status)a.append('<div class="patips-notices"><ul class="patips-success-list"><li>'+d.message+"</li></ul></div>"),a.trigger("patips_susbcription_form_processed",[d,c]),c.redirect_url&&(patips_add_loading_html(a),window.location.assign(c.redirect_url),patips_remove_loading_html(a));else if("failed"===d.status){var b="undefined"!==
typeof d.message?d.message:patips_var.error;a.append('<div class="patips-notices"><ul class="patips-error-list"><li>'+b+"</li></ul></div>");console.log(b);console.log(d)}},error:function(d){a.append('<div class="patips-notices"><ul class="patips-error-list"><li>AJAX '+patips_var.error+"</li></ul></div>");console.log("AJAX error");console.log(d)},complete:function(){a.find(".patips-notices").show();patips_remove_loading_html(a);a.data("processing",!1);a.find('input[type="submit"]').attr("disabled",
!1)}})}};
