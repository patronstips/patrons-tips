$j(document).ready(function(){$j(".patips-add-to-cart-tier-form").length&&$j(".patips-add-to-cart-tier-form").each(function(){patips_wc_add_to_cart_tier_form_frequency_switched($j(this))});$j("body").on("change",".patips-tier-frequency-input",function(){var a=$j(this).closest(".patips-add-to-cart-tier-form");patips_wc_add_to_cart_tier_form_frequency_switched(a)});$j("body").on("change",".patips-add-to-cart-tier-form .patips-tier-option-input",function(){var a=$j(this).closest(".patips-add-to-cart-tier-form");
patips_wc_refresh_add_to_cart_tier_form_instructions(a)});$j("body").on("submit",".patips-add-to-cart-tier-form",function(a){$j(this).find(".patips-notices").remove();$j(this).find(".patips-tier-option-input:checked").val()||(a.preventDefault(),$j(this).find(".patips-tier-form-submit-container").before('<div class="patips-notices"><ul class="patips-error-list"><li>'+(patips_var?.no_tier_products??"")+"</li></ul></div>"),$j(this).find(".patips-notices").show())})});
function patips_wc_add_to_cart_tier_form_frequency_switched(a){var d=a.find(".patips-tier-frequency-input:checked").val();a.find(".patips-tier-frequency-container .patips-tier-frequency").removeClass("patips-selected");a.find(".patips-tier-frequency-"+d).addClass("patips-selected");var b=!1;a.find(".patips-notices").remove();a.find(".patips-tier-option-container").removeClass("patips-hidden");a.find(".patips-tier-option-input").each(function(){var c=$j(this).data("product-id-"+d);$j(this).attr("value",
c?c:"");c||($j(this).closest(".patips-tier-option-container").addClass("patips-hidden"),$j(this).is(":checked")&&(b=!0))});a.find(".patips-tier-option-container:not(.patips-hidden)").length?b&&a.find(".patips-tier-option-container:visible:first").find(".patips-tier-option-input").prop("checked",!0).trigger("change"):a.find(".patips-tier-frequency-container:not(.patips-hidden)").length?a.find(".patips-tier-options-container").after('<div class="patips-notices"><ul class="patips-error-list"><li>'+(patips_var?.no_tiers_products_for_frequency??
"")+"</li></ul></div>"):(a.before('<div class="patips-no-results">'+(patips_var?.no_tiers_products??"")+"</div>"),a.hide());patips_wc_refresh_add_to_cart_tier_form_prices(a);patips_wc_refresh_add_to_cart_tier_form_instructions(a);a.trigger("wc_add_to_cart_tier_form_frequency_switched")}
function patips_wc_refresh_add_to_cart_tier_form_prices(a){var d=a.find(".patips-tier-frequency.patips-selected .patips-tier-frequency-input").val();a.find(".patips-tier-option-container").each(function(){var b=$j(this).data("tier_id"),c=$j(this).find(".patips-tier-option-input").val();b=patips_var?.tiers_products_price?.[b]?.[d]?.[c]??"";c=$j(this).find(".patips-tier-option-price").data("price-args");b=""!==b?patips_format_price(b,c):"";$j(this).find(".patips-tier-option-price").html(b)});a.trigger("wc_add_to_cart_tier_form_prices_refreshed")}
function patips_wc_refresh_add_to_cart_tier_form_instructions(a){var d=0<a.find(".patips-tier-option-container.patips-selected").length,b=0<a.find(".patips-tier-frequency.patips-selected").length,c=0<a.find(".patips-tier-frequency-one_off.patips-selected").length,e=a.find(".patips-tier-option-container.patips-selected .patips-tier-option-title").text(),f=a.find(".patips-tier-option-container.patips-selected .patips-tier-option-price").text(),g=a.find(".patips-tier-frequency.patips-selected label").text(),
h=a.find(".patips-tier-form-instruction-one-off").data("text").replace("{title}",e?e:"").replace("{price}",f?f:"").replace("{frequency}",g?g:"");e=a.find(".patips-tier-form-instruction-recurring").data("text").replace("{title}",e?e:"").replace("{price}",f?f:"").replace("{frequency}",g?g:"");a.find(".patips-tier-form-instruction-one-off").text(h).toggle(d&&b&&c);a.find(".patips-tier-form-instruction-recurring").text(e).toggle(d&&b&&!c);a.trigger("wc_add_to_cart_tier_form_instructions_refreshed")};
