$j(document).ready(function(){var d=!1;$j(document).on("keyup keydown",function(a){d=a.ctrlKey||a.metaKey?!0:!1});$j("#patips-tier-settings-fields-products").on("select2:opening","select",function(a){d&&(a.preventDefault(),$j(this).off("select2:opening"),patips_toggle_multiple_select($j(this)))});$j("body").on("click","#patips-sync-patron-history",function(a){a.preventDefault();patips_wc_sync_patron_history($j(this).data("patron_id"))})});
function patips_wc_sync_patron_history(d){if(!$j("#patips-sync-patron-history").data("processing")){var a=$j("#patips-sync-patron-history-container");a.find(".patips-notices").remove();$j("#patips-sync-patron-history").data("processing",!0);$j("#patips-sync-patron-history").prop("disabled",!0);patips_add_loading_html(a);var e={action:"patipsSyncPatronHistory",patron_id:d,nonce:$j("#patips-sync-patron-history").data("nonce")};$j("body").trigger("patips_sync_patron_history_data",[e]);$j.ajax({url:patips_var.ajaxurl,
type:"POST",data:e,dataType:"json",success:function(b){if("success"===b.status){$j("#patips-patron-settings-fields-history").replaceWith(b.history_table);var c="undefined"!==typeof b.message?b.message:"";c&&a.append('<div class="patips-notices"><ul class="patips-success-list"><li>'+c+"</li></ul></div>");$j("body").trigger("patips_sync_patron_history",[b,e])}else"failed"===b.status&&(c="undefined"!==typeof b.message?b.message:patips_var.error,a.append('<div class="patips-notices"><ul class="patips-error-list"><li>'+
c+"</li></ul></div>"),console.log(c),console.log(b))},error:function(b){a.append('<div class="patips-notices"><ul class="patips-error-list"><li>AJAX '+patips_var.error+"</li></ul></div>");console.log("AJAX error");console.log(b)},complete:function(){a.find(".patips-notices").show();patips_remove_loading_html(a);$j("#patips-sync-patron-history").data("processing",!1);$j("#patips-sync-patron-history").prop("disabled",!1)}})}};
